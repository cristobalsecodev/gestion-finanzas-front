<header>
  <mat-toolbar class="min-h-14 max-h-14 border-solid border-b border-color">
    <button mat-icon-button [routerLink]="[resumeRoute]">
      <mat-icon>finance</mat-icon>
    </button>

    <!-- Navegación -->
    <section class="hidden sm:ml-30 sm:block space-x-20">

      <button mat-button class="h-12 ml-5" [routerLink]="[incomeExpensesRoute]" 
        [ngClass]="{'selected-button': currentUrl().includes(incomeExpensesRoute)}">
          <mat-icon>stat_2</mat-icon>
          My income/expenses
      </button>

      <button mat-button class="h-12" [routerLink]="[investmentsRoute]"
        [ngClass]="{'selected-button': currentUrl().includes(investmentsRoute)}">
          <mat-icon>query_stats</mat-icon>
          My investments
      </button>

    </section>

    <span class="flex-auto"></span>

    <!-- Selector cambio de divisa -->
    <section>

      <button mat-stroked-button 
        matTooltip="It is possible that the API has reached its maximum call limit"
        [matTooltipDisabled]="selectedCurrency.currencyCode !== '' && selectedCurrency.currencyName !== ''"
        [matMenuTriggerFor]="menuCambioDivisa" aria-label="Menú cambio de divisa" class="w-24 ms-3 me-3">
  
        @if(selectedCurrency.currencyCode !== '' && selectedCurrency.currencyName !== '') {
  
          <mat-icon [svgIcon]="selectedCurrency.currencyCode"></mat-icon>
  
        }
  
        <span>{{ selectedCurrency.currencyCode !== '' ? selectedCurrency.currencyCode : noValue }}</span>
  
      </button>
      
    </section>

    <mat-menu #menuCambioDivisa="matMenu">

      @for(currency of currencies; track currency) {

        <button mat-menu-item (click)="currencySelection(currency.currencyCode, currency.currencyName)">
          <mat-icon [svgIcon]="currency.currencyCode"></mat-icon>
          @if(currency.currencyCode === selectedCurrency.currencyCode) {
            <mat-icon>check</mat-icon>
          }
          <span>{{ currency.currencyName }}</span>
        </button>

      } @empty {

        <button mat-menu-item>
          <mat-icon>report</mat-icon>
          <span>No currencies available</span>
        </button>

      }

    </mat-menu>

    <!-- Icono modo visual -->
    <button mat-icon-button (click)="darkMode.set(!darkMode())">

      @if(darkMode()) {

        <mat-icon>dark_mode</mat-icon>

      } @else {

        <mat-icon>light_mode</mat-icon>
        
      }

    </button>

    <!-- Icono cuenta -->
    <button mat-icon-button>

      <mat-icon>account_circle</mat-icon>

    </button>

    <!-- Menú lateral -->
     @if(sidenavOpened) {

      <section>
        <button mat-icon-button (click)="drawer.toggle()">
          <mat-icon>close</mat-icon>
        </button>
      </section>

     } @else {

      <section class="block sm:hidden sm:ml-30">
        <button mat-icon-button (click)="drawer.toggle()">
          <mat-icon>menu</mat-icon>
        </button>
      </section>

     }
  </mat-toolbar>
</header>

<main>
  <mat-sidenav-container class="h-[calc(100vh-112px)]" hasBackdrop="false">
    <mat-sidenav #drawer mode="over" position="end"  [(opened)]="sidenavOpened" class="modificar-esquinas">
      <mat-nav-list>

        <a mat-list-item [routerLink]="[incomeExpensesRoute]" 
          [ngClass]="{'selected-button': currentUrl().includes(incomeExpensesRoute)}" 
          (click)="drawer.toggle()">
            Mis ingresos/gastos
        </a>

        <a mat-list-item [routerLink]="[investmentsRoute]" 
          [ngClass]="{'selected-button': currentUrl().includes(investmentsRoute)}" 
          (click)="drawer.toggle()">
            Mis inversiones
        </a>

      </mat-nav-list>
    </mat-sidenav>
    <mat-sidenav-content>

      <!-- Componentes hijos -->
      <section>
        <router-outlet></router-outlet>
      </section>

    </mat-sidenav-content>
  </mat-sidenav-container>
</main>

<footer>
  <mat-toolbar class="mat-toolbar-bg-color min-h-14 max-h-14">Footer</mat-toolbar>
</footer>

<app-notificaciones></app-notificaciones>
