<header>
  <mat-toolbar class="min-h-14 max-h-14 border-solid border-b border-color">
    <button mat-icon-button [routerLink]="['']">
      <mat-icon>finance</mat-icon>
    </button>

    <!-- Navegación -->
    @if(isTokenValid) {

      <section class="hidden sm:ml-30 sm:block space-x-20">

        <button mat-button class="h-12 ml-5" [routerLink]="[resumeRoute]" 
        [ngClass]="{'selected-button': currentUrl().includes(resumeRoute)}">
          <mat-icon>request_quote</mat-icon>
          <span>My resume</span>
        </button>
  
  
        <button mat-button class="h-12 ml-5" [routerLink]="[incomeExpensesRoute]" 
          [ngClass]="{'selected-button': currentUrl().includes(incomeExpensesRoute)}">
            <mat-icon>payments</mat-icon>
            <span>My income/expenses</span>
        </button>
  
        <button mat-button class="h-12" [routerLink]="[investmentsRoute]"
          [ngClass]="{'selected-button': currentUrl().includes(investmentsRoute)}">
            <mat-icon>query_stats</mat-icon>
            <span>My investments</span>
        </button>
  
      </section>

    }

    <!-- Espacio intermedio de separación -->
    <span class="flex-auto"></span>

    <!-- Icono modo visual -->
    <button mat-icon-button (click)="darkMode.set(!darkMode())">

      @if(darkMode()) {

        <mat-icon>dark_mode</mat-icon>

      } @else {

        <mat-icon>light_mode</mat-icon>
        
      }

    </button>

    <!-- Icono cuenta -->
    @if(isTokenValid) {

      <button mat-icon-button [matMenuTriggerFor]="accountMenu">

        <mat-icon>account_circle</mat-icon>
  
      </button>
  
      <mat-menu #accountMenu="matMenu">
  
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Logout</span>
        </button>
  
      </mat-menu>

    }

    @if(isTokenValid) {

      <!-- Menú lateral -->
       @if(sidenavOpened) {
  
        <section>
          <button mat-icon-button (click)="drawer.toggle()">
            <mat-icon>close</mat-icon>
          </button>
        </section>
  
       } @else {
  
        <section class="block sm:hidden sm:ml-30">
          <button mat-icon-button (click)="drawer.toggle()">
            <mat-icon>menu</mat-icon>
          </button>
        </section>
  
       }
      
    }

  </mat-toolbar>
</header>

<main>
  <mat-sidenav-container hasBackdrop="false">
    <mat-sidenav #drawer mode="over" position="end"  [(opened)]="sidenavOpened" class="modificar-esquinas">
      <mat-nav-list>

        <a mat-list-item [routerLink]="[resumeRoute]" 
        [ngClass]="{'selected-button': currentUrl().includes(resumeRoute)}">
          <span>My resume</span>
        </a>

        <a mat-list-item [routerLink]="[incomeExpensesRoute]" 
          [ngClass]="{'selected-button': currentUrl().includes(incomeExpensesRoute)}" 
          (click)="drawer.toggle()">
            <span>My income/expenses</span>
        </a>

        <a mat-list-item [routerLink]="[investmentsRoute]" 
          [ngClass]="{'selected-button': currentUrl().includes(investmentsRoute)}" 
          (click)="drawer.toggle()">
            <span>My investments</span>
        </a>

      </mat-nav-list>
    </mat-sidenav>
    <mat-sidenav-content>

      <!-- Componentes hijos -->
      <section>
        <router-outlet></router-outlet>
      </section>

    </mat-sidenav-content>
  </mat-sidenav-container>
</main>

<app-notificaciones></app-notificaciones>
